(()=>{var e={};e.id=80,e.ids=[80],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},93717:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=s(70260),i=s(28203),o=s(25155),n=s.n(o),a=s(67292),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);s.d(t,l);let c=["",{children:["components",{children:["History",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,93746)),"C:\\Users\\r9025\\OneDrive\\Desktop\\Car Rental System\\car\\app\\components\\History\\page.jsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9019)),"C:\\Users\\r9025\\OneDrive\\Desktop\\Car Rental System\\car\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,42318,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\r9025\\OneDrive\\Desktop\\Car Rental System\\car\\app\\components\\History\\page.jsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/components/History/page",pathname:"/components/History",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5500:(e,t,s)=>{Promise.resolve().then(s.bind(s,93746))},91932:(e,t,s)=>{Promise.resolve().then(s.bind(s,23190))},6175:(e,t,s)=>{Promise.resolve().then(s.bind(s,2654))},43127:(e,t,s)=>{Promise.resolve().then(s.bind(s,75074))},85133:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,13219,23)),Promise.resolve().then(s.t.bind(s,34863,23)),Promise.resolve().then(s.t.bind(s,25155,23)),Promise.resolve().then(s.t.bind(s,9350,23)),Promise.resolve().then(s.t.bind(s,96313,23)),Promise.resolve().then(s.t.bind(s,48530,23)),Promise.resolve().then(s.t.bind(s,88921,23))},32397:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,66959,23)),Promise.resolve().then(s.t.bind(s,33875,23)),Promise.resolve().then(s.t.bind(s,88903,23)),Promise.resolve().then(s.t.bind(s,84178,23)),Promise.resolve().then(s.t.bind(s,86013,23)),Promise.resolve().then(s.t.bind(s,87190,23)),Promise.resolve().then(s.t.bind(s,61365,23))},23190:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(45512),i=s(58009),o=s(58242),n=s(32451),a=s.n(n),l=s(85668),c=s(45103),d=s(48981);s(25806);var u=s(25998);let p=()=>{let[e,t]=(0,i.useState)(null),s=u.A.get("userData"),n=s?JSON.parse(s).username:"guest",p=s?JSON.parse(s).email:"guest",h=async()=>{try{let e=await l.A.post("/api/history",{username:n,Email:p});t(e.data[0])}catch(e){console.log("Error fetching Booking History:",e)}};(0,i.useEffect)(()=>{"guest"!==n&&"guest"!==p&&h()},[]);let m=async e=>{try{let t=await l.A.patch("/api/bookings",{Booking_id:e});200===t.status&&(h(),console.log("Booking cancelled successfully"))}catch(e){console.log("Error canceling booking:",e)}};return(0,r.jsxs)("div",{className:a().container,children:[(0,r.jsx)(d.N9,{stacked:!0}),(0,r.jsxs)("div",{className:a().main,children:[(0,r.jsx)(o.default,{}),(0,r.jsx)("h1",{children:"Booking History"}),e&&e.length>0?(0,r.jsx)("div",{className:a().History,children:e.map((e,t)=>{let s=e.Rented_Days||0,i=e.Rented_Weeks||0,o=e.Rented_Months||0,n="";return n=s>0?`${s} Days`:i>0?`${i} Weeks`:o>0?`${o} Months`:"Duration not available",(0,r.jsxs)("div",{className:a().cars,children:[(0,r.jsx)(c.default,{src:`${e.path}`,height:200,width:200,alt:"car img",priority:!0}),(0,r.jsxs)("div",{className:a().CarDetails,children:[(0,r.jsx)("p",{className:a().carName,children:e.CarName}),(0,r.jsxs)("p",{children:[" ",(0,r.jsx)(c.default,{src:"/svg/duration.svg",width:1,height:1,alt:"duration logo"})," ",n]}),(0,r.jsxs)("p",{children:[(0,r.jsx)(c.default,{src:"/svg/pickupDate.svg",width:1,height:1,alt:"pickupDate logo"})," ",e.pickupDate]}),(0,r.jsxs)("p",{className:a().amount,children:[(0,r.jsx)(c.default,{src:"/svg/dollar.svg",width:1,height:1,alt:"dollar logo"})," ","$ ",(0,r.jsx)("strong",{children:e.TotalAmount})]})]}),(0,r.jsxs)("button",{className:a().button,onClick:()=>confirm("Are you sure to cancel booking?")&&m(e.Booking_id)||d.oR.warn("Cancellation terminated."),children:["Cancel Booking"," ",(0,r.jsx)(c.default,{src:"/svg/cancel.svg",width:1,height:1,alt:"cancel logo"})]})]},t)})}):(0,r.jsx)("p",{style:{position:"relative",color:"white",top:"10%"},children:"No bookings found."})]})]})}},58242:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(45512),i=s(90497),o=s.n(i),n=s(26008),a=s(45103),l=s(25998);let c=()=>{let e=l.A.get("userData"),t=e?JSON.parse(e).username:"guest";return(0,r.jsxs)("div",{className:o().nav,children:[(0,r.jsxs)("div",{className:o().title,children:[(0,r.jsx)(a.default,{src:"/svg/logo.svg",alt:"logo",height:25,width:50}),(0,r.jsx)("i",{children:"Car Rental"})]}),(0,r.jsxs)("div",{className:o().items,children:["Admin"!==t&&(0,r.jsxs)(n.default,{href:"/components/HomePage",children:[" ",(0,r.jsx)("li",{children:"Home"})]}),(0,r.jsxs)(n.default,{href:"/components/Rent",children:[" ",(0,r.jsx)("li",{children:"Book Cars"})," "]}),"Admin"!==t&&(0,r.jsxs)(n.default,{href:"/components/Contact",children:[" ",(0,r.jsx)("li",{children:"Contact Us"})]}),"Admin"!==t&&(0,r.jsxs)(n.default,{href:"/components/History",children:[" ",(0,r.jsx)("li",{children:"My Bookings"})]}),"Admin"===t&&(0,r.jsxs)(n.default,{href:"/components/Admin",children:[" ",(0,r.jsx)("li",{children:"Admin"})," "]}),"Admin"===t&&(0,r.jsxs)(n.default,{href:"/components/Logs",children:[" ",(0,r.jsx)("li",{children:"All Bookings"})," "]})]}),(0,r.jsxs)("div",{className:o().items,children:[" ","User: ",t||"guest",(0,r.jsxs)(n.default,{href:"/",onClick:()=>{l.A.remove("validUserLogged"),l.A.remove("AdminLogged"),l.A.remove("userData")},children:[" ",(0,r.jsx)("button",{children:"Sign Out"})," "]})]})]})}},32451:e=>{e.exports={container:"History_container__5azRn",main:"History_main__XPnYO",History:"History_History__5UV88",cars:"History_cars__19f01",CarDetails:"History_CarDetails__8TCsh",carName:"History_carName__xO3wS",amount:"History_amount__IXsBw",button:"History_button__7g_Zn"}},90497:e=>{e.exports={nav:"NavBar_nav__KlVRO",items:"NavBar_items__e1yni",title:"NavBar_title__E9y2Q"}},93746:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\r9025\\\\OneDrive\\\\Desktop\\\\Car Rental System\\\\car\\\\app\\\\components\\\\History\\\\page.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\r9025\\OneDrive\\Desktop\\Car Rental System\\car\\app\\components\\History\\page.jsx","default")},9019:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>o});var r=s(62740);s(82704);var i=s(2654);s(89409);let o={title:"Car Rental System",icons:{icon:"/images/icons/favicon.png"}};function n({children:e}){return(0,r.jsx)("html",{lang:"en",children:(0,r.jsx)("body",{children:(0,r.jsx)(i.GoogleOAuthProvider,{clientId:process.env.GOOGLE_CLIENT_ID,children:e})})})}},82704:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[989,36,597,668,332],()=>s(93717));module.exports=r})();