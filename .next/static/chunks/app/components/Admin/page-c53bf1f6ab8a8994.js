(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[135],{7399:(e,a,r)=>{Promise.resolve().then(r.bind(r,1135))},1135:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>d});var i=r(5155),n=r(2115),t=r(6382),s=r(7397),l=r.n(s),c=r(4932);r(5716);let d=()=>{let[e,a]=(0,n.useState)({carName:"",yearOfManufacture:"",mileage:"",fuelType:"",carCategory:"",emissionStandard:"",transmissionType:"",seatCapacity:"",pricePerDay:"",pricePerWeek:"",pricePerMonth:""}),[r,s]=(0,n.useState)({}),[d,o]=(0,n.useState)(null),h=e=>{let{name:r,value:i}=e.target;a(e=>({...e,[r]:i}))},u=new FormData;u.append("file",d),u.append("carName",e.carName);let p=()=>{let a={},r=!0;return Object.keys(e).forEach(i=>{e[i].trim()||(a[i]="".concat(i.replace(/([A-Z])/g," $1").toUpperCase()," is required"),r=!1)}),e.yearOfManufacture&&!/^\d{4}$/.test(e.yearOfManufacture)&&(a.yearOfManufacture="Please enter a valid 4-digit year",r=!1),e.mileage&&!/^[a-zA-Z0-9\s\-\/]*$/.test(e.mileage)?(a.mileage="Please enter valid characters for mileage",r=!1):e.mileage.trim()||(a.mileage="Mileage cannot be empty",r=!1),e.pricePerDay&&isNaN(e.pricePerDay)&&(a.pricePerDay="Please enter a valid number for price per day",r=!1),e.pricePerWeek&&isNaN(e.pricePerWeek)&&(a.pricePerWeek="Please enter a valid number for price per week",r=!1),e.pricePerMonth&&isNaN(e.pricePerMonth)&&(a.pricePerMonth="Please enter a valid number for price per month",r=!1),s(a),Object.values(a).forEach(e=>{c.oR.warn(e)}),r},m=async r=>{if(r.preventDefault(),!p())return;if(!window.confirm("Are you sure you want to upload the car details?")){c.oR.warn("Submission Cancelled");return}let i={carName:e.carName,yearOfManufacture:e.yearOfManufacture,mileage:e.mileage,fuelType:e.fuelType,carCategory:e.carCategory,emissionStandard:e.emissionStandard,transmissionType:e.transmissionType,seatCapacity:e.seatCapacity,pricePerDay:e.pricePerDay,pricePerWeek:e.pricePerWeek,pricePerMonth:e.pricePerMonth};try{let e=await fetch("/api/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),r=await fetch("/api/images",{method:"POST",body:u}),n=await r.json();(await e.json()).success&&(c.oR.success("Car uploaded successfully"),a({carName:"",yearOfManufacture:"",mileage:"",fuelType:"",carCategory:"",emissionStandard:"",transmissionType:"",seatCapacity:"",pricePerDay:"",pricePerWeek:"",pricePerMonth:""})),n.success?(console.log("Image Upload successful: ".concat(n.name)),c.oR.success("Image Upload successful: ".concat(n.name))):c.oR.error("Error uploading car data")}catch(e){console.log("Error uploading car data:",e),c.oR.error("Error uploading car data")}};return(0,i.jsxs)("div",{className:l().container,children:[(0,i.jsx)(c.N9,{stacked:!0}),(0,i.jsxs)("div",{className:l().main,children:[(0,i.jsx)(t.default,{}),(0,i.jsxs)("form",{onSubmit:m,className:l().upload,children:[(0,i.jsxs)("table",{className:l().carFormTable,children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{}),(0,i.jsx)("th",{})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("label",{htmlFor:"carName",children:"Car Name:"})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"text",id:"carName",name:"carName",value:e.carName,onChange:h})}),(0,i.jsx)("td",{children:(0,i.jsx)("label",{htmlFor:"yearOfManufacture",children:"Year of Manufacture:"})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"text",id:"yearOfManufacture",name:"yearOfManufacture",value:e.yearOfManufacture,onChange:h})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("label",{htmlFor:"mileage",children:"Mileage:"})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"text",id:"mileage",name:"mileage",value:e.mileage,onChange:h})}),(0,i.jsx)("td",{children:(0,i.jsx)("label",{htmlFor:"fuelType",children:"Fuel Type:"})}),(0,i.jsx)("td",{children:(0,i.jsxs)("select",{id:"fuelType",name:"fuelType",value:e.fuelType,onChange:h,children:[(0,i.jsx)("option",{value:"",children:"Select Fuel Type"}),(0,i.jsx)("option",{value:"Petrol",children:"Petrol"}),(0,i.jsx)("option",{value:"Diesel",children:"Diesel"}),(0,i.jsx)("option",{value:"Electric",children:"Electric"}),(0,i.jsx)("option",{value:"Hybrid",children:"Hybrid"})]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("label",{htmlFor:"carCategory",children:"Car Category:"})}),(0,i.jsx)("td",{children:(0,i.jsxs)("select",{id:"carCategory",name:"carCategory",value:e.carCategory,onChange:h,children:[(0,i.jsx)("option",{value:"",children:"Select Car Category"}),(0,i.jsx)("option",{value:"SUV",children:"SUV"}),(0,i.jsx)("option",{value:"Luxury Sedan",children:"Luxury Sedan"}),(0,i.jsx)("option",{value:"Sports",children:"Sports"}),(0,i.jsx)("option",{value:"Sedan",children:"Sedan"}),(0,i.jsx)("option",{value:"Hatchback",children:"Hatchback"}),(0,i.jsx)("option",{value:"Truck",children:"Truck"})]})}),(0,i.jsx)("td",{children:(0,i.jsx)("label",{htmlFor:"emissionStandard",children:"Emission Standard:"})}),(0,i.jsx)("td",{children:(0,i.jsxs)("select",{id:"emissionStandard",name:"emissionStandard",value:e.emissionStandard,onChange:h,children:[(0,i.jsx)("option",{value:"",children:"Select Emission Standard"}),(0,i.jsx)("option",{value:"BS5",children:"BS5"}),(0,i.jsx)("option",{value:"BS6",children:"BS6"})]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("label",{htmlFor:"transmissionType",children:"Transmission Type:"})}),(0,i.jsx)("td",{children:(0,i.jsxs)("select",{id:"transmissionType",name:"transmissionType",value:e.transmissionType,onChange:h,children:[(0,i.jsx)("option",{value:"",children:"Select Transmission Type"}),(0,i.jsx)("option",{value:"Manual",children:"Manual"}),(0,i.jsx)("option",{value:"Automatic",children:"Automatic"})]})}),(0,i.jsx)("td",{children:(0,i.jsx)("label",{htmlFor:"seatCapacity",children:"Seat Capacity:"})}),(0,i.jsx)("td",{children:(0,i.jsxs)("select",{id:"seatCapacity",name:"seatCapacity",value:e.seatCapacity,onChange:h,children:[(0,i.jsx)("option",{value:"",children:"Select Seat Capacity"}),(0,i.jsx)("option",{value:"4",children:"4"}),(0,i.jsx)("option",{value:"5",children:"5"}),(0,i.jsx)("option",{value:"6",children:"6"}),(0,i.jsx)("option",{value:"7",children:"7"}),(0,i.jsx)("option",{value:"8",children:"8"}),(0,i.jsx)("option",{value:"9",children:"9"}),(0,i.jsx)("option",{value:"10",children:"10"})]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("label",{htmlFor:"pricePerDay",children:"Price per Day:"})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"number",id:"pricePerDay",name:"pricePerDay",value:e.pricePerDay,onChange:h})}),(0,i.jsx)("td",{children:(0,i.jsx)("label",{htmlFor:"pricePerWeek",children:"Price per Week:"})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"number",id:"pricePerWeek",name:"pricePerWeek",value:e.pricePerWeek,onChange:h})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("label",{htmlFor:"pricePerMonth",children:"Price per Month:"})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"number",id:"pricePerMonth",name:"pricePerMonth",value:e.pricePerMonth,onChange:h})}),(0,i.jsx)("td",{children:(0,i.jsx)("label",{htmlFor:"file",children:"Upload File:"})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{style:{cursor:"pointer"},type:"file",id:"file",name:"file",onChange:e=>{e.target.files&&o(e.target.files[0])}})})]})]})]}),(0,i.jsx)("div",{className:l().button,children:(0,i.jsx)("button",{type:"submit",children:"Upload"})})]})]})]})}},6382:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>d});var i=r(5155),n=r(4952),t=r.n(n),s=r(7396),l=r(5565),c=r(9208);let d=()=>{let e=c.A.get("userData"),a=e?JSON.parse(e).username:"guest";return(0,i.jsxs)("div",{className:t().nav,children:[(0,i.jsxs)("div",{className:t().title,children:[(0,i.jsx)(l.default,{src:"/svg/logo.svg",alt:"logo",height:25,width:50}),(0,i.jsx)("i",{children:"Car Rental"})]}),(0,i.jsxs)("div",{className:t().items,children:["Admin"!==a&&(0,i.jsxs)(s.default,{href:"/components/HomePage",children:[" ",(0,i.jsx)("li",{children:"Home"})]}),(0,i.jsxs)(s.default,{href:"/components/Rent",children:[" ",(0,i.jsx)("li",{children:"Book Cars"})," "]}),"Admin"!==a&&(0,i.jsxs)(s.default,{href:"/components/Contact",children:[" ",(0,i.jsx)("li",{children:"Contact Us"})]}),"Admin"!==a&&(0,i.jsxs)(s.default,{href:"/components/History",children:[" ",(0,i.jsx)("li",{children:"My Bookings"})]}),"Admin"===a&&(0,i.jsxs)(s.default,{href:"/components/Admin",children:[" ",(0,i.jsx)("li",{children:"Admin"})," "]}),"Admin"===a&&(0,i.jsxs)(s.default,{href:"/components/Logs",children:[" ",(0,i.jsx)("li",{children:"All Bookings"})," "]})]}),(0,i.jsxs)("div",{className:t().items,children:[" ","User: ",a||"guest",(0,i.jsxs)(s.default,{href:"/",onClick:()=>{c.A.remove("validUserLogged"),c.A.remove("AdminLogged"),c.A.remove("userData")},children:[" ",(0,i.jsx)("button",{children:"Sign Out"})," "]})]})]})}},7397:e=>{e.exports={container:"Admin_container__WAj1Q",main:"Admin_main__dPKZS",upload:"Admin_upload__l9pDa",carName:"Admin_carName__0dQNP",error:"Admin_error__ycf45",button:"Admin_button__yIAuW",carFormTable:"Admin_carFormTable__1HsD4"}},4952:e=>{e.exports={nav:"NavBar_nav__KlVRO",items:"NavBar_items__e1yni",title:"NavBar_title__E9y2Q"}}},e=>{var a=a=>e(e.s=a);e.O(0,[338,259,898,140,441,517,358],()=>a(7399)),_N_E=e.O()}]);